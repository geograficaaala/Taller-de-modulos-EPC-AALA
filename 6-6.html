<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>6.6 Avifauna en la RUMCLA · EPC AALA</title>
  <meta name="description" content="Avifauna del área: datos clave, amenazas, acciones y juegos (conteo y sopa de letras)." />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@600;700;800&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Markmap autoloader (más estable que cargar lib/view por separado) -->
  <script src="https://cdn.jsdelivr.net/npm/markmap-autoloader@0.16.1"></script>

  <style>

    :root{
      --ink:#0b1020;
      --muted:rgba(11,16,32,.72);
      --stroke:rgba(11,16,32,.10);
      --glass:rgba(255,255,255,.66);
      --shadow:0 18px 45px rgba(11,16,32,.14);
      --shadow-soft:0 10px 24px rgba(11,16,32,.10);
      --radius:24px;

      --a1: rgba(160, 220, 255, .95);
      --a2: rgba(190, 235, 255, .92);
      --a3: rgba(210, 245, 255, .88);
      --a4: rgba(200, 230, 255, .65);

      --good: rgba(34,197,94,.14);
      --bad: rgba(225,29,72,.12);
      --warn: rgba(245,158,11,.14);
      --info: rgba(45,160,220,.14);

      --btn: rgba(255,255,255,.62);
      --btnh: rgba(255,255,255,.82);
      --accent: rgba(35, 140, 210, .20);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      color:var(--ink);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1100px 760px at 12% 12%, var(--a2), transparent 58%),
        radial-gradient(980px 760px at 84% 18%, var(--a1), transparent 62%),
        radial-gradient(1200px 920px at 48% 96%, var(--a3), transparent 58%),
        linear-gradient(135deg, #eefaff 0%, #e8f7ff 45%, #f2fcff 100%);
      min-height:100vh;
    }
    .wrap{ max-width: 1200px; margin: 0 auto; padding: 26px 18px 64px; }
    header{
      border: 1px solid var(--stroke);
      background: var(--glass);
      border-radius: var(--radius);
      box-shadow: var(--shadow-soft);
      backdrop-filter: blur(12px);
      padding: 18px;
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap: 12px;
      flex-wrap:wrap;
    }
    .kicker{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.62);
      font-weight: 900;
      font-size: 12px;
      color: rgba(11,16,32,.78);
      box-shadow: var(--shadow-soft);
    }
    h1{
      margin: 10px 0 0;
      font-family: Outfit, Inter, system-ui;
      font-weight: 900;
      letter-spacing:.2px;
      line-height: 1.08;
      font-size: clamp(22px, 2.7vw, 34px);
    }
    .subtitle{
      margin: 8px 0 0;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.55;
      max-width: 96ch;
    }
    .nav{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .btn{
      appearance:none;
      border: 1px solid rgba(11,16,32,.12);
      background: var(--btn);
      border-radius: 14px;
      padding: 10px 12px;
      text-decoration:none;
      font-weight: 900;
      font-size: 13px;
      color: rgba(11,16,32,.86);
      box-shadow: var(--shadow-soft);
      user-select:none;
      display:inline-flex;
      align-items:center;
      gap: 8px;
      transition: transform .08s ease, background .12s ease, border-color .12s ease;
      cursor:pointer;
      white-space:nowrap;
    }
    .btn:hover{ background: var(--btnh); border-color: rgba(11,16,32,.18); }
    .btn:active{ transform: translateY(1px); }
    .btn.primary{
      background: rgba(120, 210, 255, .28);
      border-color: rgba(35, 140, 210, .22);
    }
    main.stack{ display:flex; flex-direction:column; gap: 14px; margin-top: 14px; }

    .card{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.62);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      padding: 16px;
    }
    .card h2{
      margin:0;
      font-family: Outfit, Inter, system-ui;
      font-weight: 900;
      font-size: 18px;
      letter-spacing:.2px;
    }
    .hint{ margin: 8px 0 0; font-size: 13px; color: rgba(11,16,32,.72); line-height: 1.55; }
    .twoCols{
      margin-top: 10px;
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 12px;
      align-items: start;
    }
    @media (max-width: 980px){ .twoCols{ grid-template-columns: 1fr; } }

    .box{
      border: 1px solid rgba(11,16,32,.10);
      background: rgba(255,255,255,.58);
      border-radius: 18px;
      padding: 12px;
      box-shadow: var(--shadow-soft);
    }
    .box p{ margin: 0 0 10px; color: rgba(11,16,32,.80); line-height: 1.65; font-size: 13.6px; }
    .box ul{ margin: 8px 0 0 18px; color: rgba(11,16,32,.82); font-size: 13.4px; line-height: 1.6; }
    .box li{ margin: 6px 0; }
    .grid3{
      margin-top: 12px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }
    @media (max-width: 980px){ .grid3{ grid-template-columns: 1fr; } }
    .pill{
      border: 1px solid rgba(11,16,32,.10);
      background: linear-gradient(135deg, rgba(180,235,255,.55), rgba(255,255,255,.58));
      border-radius: 18px;
      padding: 12px;
      box-shadow: var(--shadow-soft);
    }
    .pill .t{ font-weight: 900; font-family: Outfit, Inter, system-ui; letter-spacing:.2px; }
    .pill .s{ margin: 6px 0 0; color: rgba(11,16,32,.74); font-size: 13px; line-height: 1.55; }

    .result{
      margin-top: 10px;
      border-radius: 16px;
      border: 1px solid rgba(11,16,32,.12);
      background: rgba(255,255,255,.55);
      padding: 12px;
      font-size: 13px;
      line-height: 1.55;
      color: rgba(11,16,32,.82);
      display:none;
    }
    .result.show{ display:block; }
    .ok{ background: var(--good); border-color: rgba(34,197,94,.22); }
    .no{ background: var(--bad); border-color: rgba(225,29,72,.20); }
    .info{ background: var(--info); border-color: rgba(45,160,220,.20); }
    .warn{ background: var(--warn); border-color: rgba(245,158,11,.22); }

    /* Mapa mental */
    .mapTop{ display:flex; justify-content:space-between; align-items:flex-end; gap:10px; flex-wrap:wrap; }
    .mapBtns{ display:flex; gap:10px; flex-wrap:wrap; }
    .mapWrap{
      margin-top: 10px;
      border-radius: 18px;
      border: 1px solid rgba(11,16,32,.12);
      background: rgba(255,255,255,.60);
      box-shadow: var(--shadow-soft);
      overflow:hidden;
      padding: 10px;
    }
    svg#mindmap{ width:100%; height: 520px; display:block; border-radius: 14px; }
    .fallback{
      margin-top: 10px;
      border-radius: 14px;
      border: 1px dashed rgba(11,16,32,.18);
      background: rgba(255,255,255,.55);
      color: rgba(11,16,32,.74);
      padding: 10px 12px;
      font-size: 13px;
      line-height: 1.5;
      display:none;
    }
    .fallback.show{ display:block; }

    /* Juegos */
    .gameGrid{
      margin-top: 10px;
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap: 12px;
      align-items:start;
    }
    @media (max-width: 980px){ .gameGrid{ grid-template-columns: 1fr; } }

    .panel{
      border-radius: 18px;
      border: 1px solid rgba(11,16,32,.10);
      background: rgba(255,255,255,.58);
      box-shadow: var(--shadow-soft);
      padding: 12px;
    }
    .panel h3{
      margin:0 0 6px;
      font-family: Outfit, Inter, system-ui;
      font-weight: 900;
      font-size: 14px;
      letter-spacing:.2px;
    }
    .panel p{ margin:0 0 10px; color: rgba(11,16,32,.72); font-size: 13px; line-height: 1.55; }

    .chips{ display:flex; gap:8px; flex-wrap:wrap; }
    .chip{
      border: 1px solid rgba(11,16,32,.12);
      background: rgba(255,255,255,.62);
      border-radius: 999px;
      padding: 8px 10px;
      font-weight: 900;
      font-size: 12px;
      color: rgba(11,16,32,.80);
      cursor:pointer;
      user-select:none;
      box-shadow: var(--shadow-soft);
      transition: transform .08s ease, background .12s ease;
    }
    .chip:hover{ background: rgba(255,255,255,.82); }
    .chip:active{ transform: translateY(1px); }

    .list{ display:grid; gap:10px; }
    .choice{
      border: 1px solid rgba(11,16,32,.12);
      background: rgba(255,255,255,.70);
      border-radius: 16px;
      padding: 12px;
      text-align:left;
      cursor:pointer;
      user-select:none;
      box-shadow: 0 10px 22px rgba(11,16,32,.06);
      transition: transform .08s ease, background .12s ease, border-color .12s ease;
    }
    .choice:hover{ background: rgba(255,255,255,.84); border-color: rgba(11,16,32,.18); transform: translateY(-1px); }
    .choice .t{ font-weight: 900; margin:0 0 6px; }
    .choice .s{ margin:0; color: rgba(11,16,32,.72); font-size: 12.6px; line-height: 1.45; }

    .kpis{ display:grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
    @media (max-width:520px){ .kpis{ grid-template-columns: 1fr; } }
    .kpi{
      border-radius: 16px;
      border: 1px solid rgba(11,16,32,.10);
      background: rgba(255,255,255,.62);
      box-shadow: var(--shadow-soft);
      padding: 10px;
    }
    .kpi .k{ font-size: 12px; color: rgba(11,16,32,.70); font-weight: 900; }
    .kpi .v{ margin-top: 6px; font-family: Outfit, Inter, system-ui; font-weight: 900; font-size: 18px; letter-spacing:.2px; }
    .kpi .u{ font-size: 12px; color: rgba(11,16,32,.62); margin-top: 2px; }

    .meter{
      border-radius: 18px;
      border: 1px solid rgba(11,16,32,.10);
      background: rgba(255,255,255,.62);
      box-shadow: var(--shadow-soft);
      padding: 12px;
    }
    .bar{ height: 12px; border-radius: 999px; background: rgba(11,16,32,.10); overflow:hidden; margin-top:8px; }
    .bar > div{ height:100%; width: 50%; background: rgba(45,160,220,.45); transition: width .2s ease; }
    .tiny{ font-size: 12px; color: rgba(11,16,32,.68); line-height: 1.4; margin-top: 8px; }

    canvas.chart{ width:100%; height: 220px; border-radius: 14px; border: 1px solid rgba(11,16,32,.10); background: rgba(255,255,255,.60); }
    .ctrlRow{ display:flex; align-items:center; justify-content:space-between; gap:10px; margin-top: 10px; }
    .ctrlRow label{ font-weight: 900; font-size: 13px; color: rgba(11,16,32,.82); }
    input[type="range"]{ width: 54%; }
    .val{ font-weight: 900; font-size: 13px; color: rgba(11,16,32,.78); min-width: 68px; text-align:right; }
    .actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 10px; align-items:center; }

    /* Sopa de letras */
    .gridWord{
      display:grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 6px;
      margin-top: 10px;
      user-select:none;
      touch-action: none;
    }
    .cell{
      border-radius: 12px;
      border: 1px solid rgba(11,16,32,.10);
      background: rgba(255,255,255,.70);
      height: 34px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 900;
      font-size: 13px;
      color: rgba(11,16,32,.86);
      box-shadow: 0 8px 18px rgba(11,16,32,.06);
    }
    .cell.sel{ outline: 3px solid rgba(120,210,255,.35); }
    .cell.hit{ background: rgba(34,197,94,.16); border-color: rgba(34,197,94,.22); }
    .words{ display:flex; gap:8px; flex-wrap:wrap; margin-top: 10px; }
    .wordTag{
      border-radius: 999px;
      border: 1px solid rgba(11,16,32,.12);
      background: rgba(255,255,255,.62);
      padding: 6px 10px;
      font-weight: 900;
      font-size: 12px;
      color: rgba(11,16,32,.78);
    }
    .wordTag.done{ background: rgba(34,197,94,.14); border-color: rgba(34,197,94,.22); }

    footer{ text-align:center; padding:18px 0 4px; color: rgba(11,16,32,.58); font-size: 13px; }

  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div>
        <div class="kicker">Módulo 6 · Conservación de los bienes y servicios ambientales</div>
        <h1>6.6 Avifauna en la RUMCLA</h1>
        <p class="subtitle">La avifauna de la RUMCLA es clave para la salud del ecosistema (semillas, polinización, control de plagas). Se reportan 236 especies en el área (≈33% de Guatemala). Practica con un conteo rápido y una sopa de letras temática.</p>
      </div>
      <nav class="nav">
        <a class="btn" href="index.html">Inicio</a>
        <a class="btn" href="6-5.html">Anterior (6.5)</a>
        <a class="btn primary" href="index.html">Siguiente (Inicio)</a>
      </nav>
    </header>

    <main class="stack">

      <!-- TEORÍA AMPLIADA -->
      <section class="card">
        <h2>Contexto teórico (ampliado)</h2>
        
<div class="twoCols">
  <div class="box">
    <p>
      La <strong>avifauna</strong> (aves) de la RUMCLA es muy diversa y cumple funciones clave:
      <strong>dispersión de semillas</strong>, <strong>polinización</strong>, <strong>control de plagas</strong> e incluso sirven como
      <strong>indicadores</strong> de la salud del bosque.
    </p>
    <ul>
      <li>En la RUMCLA se han reportado <strong>236 especies</strong> de aves (≈ <strong>33%</strong> de las especies reportadas para Guatemala).</li>
      <li>Alrededor de <strong>57 especies</strong> (≈24%) están en lista <strong>SETIC</strong> y <strong>67 especies</strong> (≈28%) en la lista roja nacional.</li>
      <li>La reproducción de especies amenazadas como el <strong>pavo de cacho</strong> ha sido documentada en el complejo volcánico; se reporta una densidad aproximada de <strong>10.5 individuos/km²</strong>.</li>
    </ul>
    <div class="result info show" style="display:block">
      Algunas especies que se consideran en riesgo a nivel mundial incluyen: <em>Oreophasis derbianus</em>, <em>Tangara cabanisi</em>, <em>Ergaticus versicolor</em>, <em>Pharomachrus mocinno</em>, entre otras.
    </div>
  </div>

  <div class="box">
    <p><strong>Historia y amenazas</strong></p>
    <ul>
      <li>Una especie antes considerada endémica del lago, el <strong>pato poc</strong> (<em>Podilymbus gigas</em>), se considera extinta; se cree que influyó la competencia por alimento con la <strong>lobina negra</strong> (especie exótica introducida).</li>
      <li>Amenazas actuales: crecimiento poblacional, expansión agrícola, sobreexplotación, contaminación, destrucción de hábitat, comercio ilegal, especies exóticas y tala.</li>
      <li>Acciones: proteger lugares naturales, controlar exóticas, concientizar, educación ambiental y <strong>no comprar</strong> fauna silvestre.</li>
    </ul>
    <p style="margin-top:10px">
      Conservar aves = conservar bosque, agua y cultura: muchas canciones, historias y leyendas locales están ligadas a las aves.
    </p>
  </div>
</div>

<div class="grid3">
  <div class="pill">
    <div class="t">Dispersión</div>
    <p class="s">Aves llevan semillas a nuevos lugares y ayudan a regenerar bosques.</p>
  </div>
  <div class="pill">
    <div class="t">Indicadores</div>
    <p class="s">La presencia de ciertas especies sugiere bosques en buen estado.</p>
  </div>
  <div class="pill">
    <div class="t">Protección</div>
    <p class="s">Bosque + control de exóticas + menos contaminación = más avifauna.</p>
  </div>
</div>

      </section>

      <!-- MAPA MENTAL -->
      <section class="card">
        <div class="mapTop">
          <div>
            <h2>Mapa mental</h2>
            <div class="hint">Interactivo: ajustar, plegar/desplegar y re-centrar.</div>
          </div>
          <div class="mapBtns">
            <button class="btn" id="btnFit" type="button">Centrar</button>
            <button class="btn" id="btnToggle" type="button">Plegar/Desplegar</button>
            <button class="btn" id="btnResetMap" type="button">Recargar mapa</button>
          </div>
        </div>

        <div class="mapWrap">
          <svg id="mindmap" class="markmap" role="img" aria-label="Mapa mental"></svg>
          <div class="fallback" id="mapFallback">
            No se pudo cargar el mapa mental. Verifica tu conexión a internet (scripts de Markmap) y recarga la página.
          </div>
        </div>
      </section>

      
<section class="card">
  <h2>Juego 1 · Conteo rápido de aves (modo “científico/a”)</h2>
  <div class="hint">
    Aparecen tarjetas. Toca solo las que son <strong>aves de la RUMCLA</strong> (✅). Evita distractores (⛔). Meta: 15 aciertos con 3 o menos errores.
  </div>

  <div class="gameGrid">
    <div class="panel">
      <h3>Conteo</h3>
      <div class="kpis">
        <div class="kpi"><div class="k">Aciertos</div><div class="v" id="birdOk">0</div><div class="u">meta 15</div></div>
        <div class="kpi"><div class="k">Errores</div><div class="v" id="birdBad">0</div><div class="u">máx 3</div></div>
      </div>

      <div id="birdDeck" class="list" style="margin-top:10px;"></div>

      <div class="actions">
        <button class="btn primary" type="button" id="birdStart">Iniciar</button>
        <button class="btn" type="button" id="birdReset">Reiniciar</button>
      </div>

      <div class="result" id="birdMsg"></div>
    </div>

    <div class="panel">
      <h3>Tip</h3>
      <p>
        Muchas aves clave están asociadas al <strong>bosque nuboso</strong> (quetzal, pavo de cacho, chipe de cabeza rosada) y
        otras a humedales/tulares (aves acuáticas). Su presencia suele reflejar la salud del ecosistema.
      </p>
      <div class="result info show" style="display:block">Si dudas, piensa: ¿“parece” un organismo que vuela y pone huevos? Si no, es distractor.</div>
    </div>
  </div>
</section>

<section class="card">
  <h2>Juego 2 · Sopa de letras (avifauna y cuenca)</h2>
  <div class="hint">Encuentra las palabras arrastrando en línea (horizontal/vertical/diagonal). Funciona con mouse o dedo.</div>

  <div class="gameGrid">
    <div class="panel">
      <h3>Tablero</h3>
      <div class="gridWord" id="wsGrid"></div>
      <div class="words" id="wsWords"></div>

      <div class="actions">
        <button class="btn primary" type="button" id="wsNew">Nuevo tablero</button>
        <button class="btn" type="button" id="wsReset">Reiniciar</button>
      </div>

      <div class="result" id="wsMsg"></div>
    </div>

    <div class="panel">
      <h3>Palabras</h3>
      <p>Son nombres o términos del tema (sin tildes). Si te cuesta, busca primero las más largas.</p>
      <div class="result warn show" style="display:block">
        Pista: QUETZAL y PAVODECACHO suelen estar. También BOSQUE y CUENCA.
      </div>
    </div>
  </div>
</section>


      <footer>EPC AALA</footer>
    </main>
  </div>

  <script>
    const MAP_MD = "\n# 6.6 Avifauna en la RUMCLA\n## Importancia ecológica\n- Dispersión de semillas\n- Polinización\n- Control de plagas\n- Indicadores del estado del bosque\n## Datos clave\n- 236 especies reportadas (≈33% de Guatemala)\n- 57 en SETIC (≈24%)\n- 67 en lista roja nacional (≈28%)\n- Pavo de cacho: densidad ~10.5 ind/km² (zona volcánica)\n## Ejemplos\n- Quetzal (Pharomachrus mocinno)\n- Pavo de cacho (Oreophasis derbianus)\n- Tangara de Cabanis (Tangara cabanisi)\n- Chipe de cabeza rosada (Ergaticus versicolor)\n- Cayaya / chacha negra (Penelopina nigra)\n## Amenazas\n- Fragmentación, tala, incendios\n- Comercio ilegal\n- Contaminación\n- Especies exóticas\n## Acciones\n- Proteger hábitat\n- Control de exóticas\n- Educación ambiental\n- No comprar fauna silvestre\n";


    // =========================
    // MAPA MENTAL (Markmap)
    // =========================
    const md = MAP_MD.trim();

    let mm=null, expanded=true;
    function renderMap(){
      const fb=document.getElementById('mapFallback');
      try{
        if(!window.markmap?.Transformer || !window.markmap?.Markmap) return false;
        const {Transformer,Markmap}=window.markmap;
        const t=new Transformer();
        const {root}=t.transform(md);
        const svg=document.getElementById('mindmap');
        while(svg.firstChild) svg.removeChild(svg.firstChild);
        mm=Markmap.create(svg,{autoFit:true,duration:240},root);
        fb.classList.remove('show');
        return true;
      }catch(e){
        fb.classList.add('show');
        return true;
      }
    }
    let tries=0;
    const it=setInterval(()=>{tries++; const ok=renderMap(); if(ok||tries>=14) clearInterval(it);},300);

    document.getElementById('btnFit').onclick=()=>mm&&mm.fit();
    document.getElementById('btnToggle').onclick=()=>{
      if(!mm) return;
      expanded ? mm.foldAll() : mm.unfoldAll();
      expanded=!expanded;
    };
    document.getElementById('btnResetMap').onclick=()=>{ mm=null; expanded=true; renderMap(); };



    // =========================
    // Juego 1: Conteo rápido
    // =========================
    const birdOkEl=document.getElementById('birdOk');
    const birdBadEl=document.getElementById('birdBad');
    const birdDeck=document.getElementById('birdDeck');
    const birdMsg=document.getElementById('birdMsg');
    const birdStart=document.getElementById('birdStart');
    const birdReset=document.getElementById('birdReset');

    const BIRD_CARDS = [
      {t:"✅ Quetzal (Pharomachrus mocinno)", ok:true},
      {t:"✅ Pavo de cacho (Oreophasis derbianus)", ok:true},
      {t:"✅ Tangara de Cabanis", ok:true},
      {t:"✅ Chipe de cabeza rosada", ok:true},
      {t:"✅ Cayaya / chacha negra", ok:true},
      {t:"✅ Garza blanca (Ardea alba)", ok:true},
      {t:"✅ Gallinula chloropus", ok:true},
      {t:"⛔ Lobina negra (pez exótico)", ok:false},
      {t:"⛔ Alga filamentosa", ok:false},
      {t:"⛔ Rana (anfibio)", ok:false},
      {t:"⛔ Pinabete (árbol)", ok:false},
      {t:"⛔ Basura plástica", ok:false},
    ];

    let bOk=0, bBad=0, bRun=false, bTimer=null;

    function updateBird(){
      birdOkEl.textContent=String(bOk);
      birdBadEl.textContent=String(bBad);
    }

    function endBird(win){
      bRun=false;
      if(bTimer) clearInterval(bTimer);
      bTimer=null;
      birdDeck.innerHTML="";
      birdMsg.classList.add('show');
      if(win){
        birdMsg.className="result ok show";
        birdMsg.innerHTML="<strong>¡Excelente!</strong> Conteo completado con precisión.";
      }else{
        birdMsg.className="result no show";
        birdMsg.innerHTML="<strong>Fin.</strong> Te pasaste de errores o no llegaste a la meta. Reinicia e intenta otra vez.";
      }
    }

    function spawnCard(){
      if(!bRun) return;
      const c=BIRD_CARDS[Math.floor(Math.random()*BIRD_CARDS.length)];
      const el=document.createElement('div');
      el.className="choice";
      el.innerHTML=`<p class="t">${c.t}</p><p class="s">Toca para registrar.</p>`;
      el.addEventListener('click', ()=>{
        if(!bRun) return;
        if(c.ok) bOk++; else bBad++;
        updateBird();
        el.remove();
        if(bOk>=15 && bBad<=3) endBird(true);
        if(bBad>3) endBird(false);
      });
      birdDeck.prepend(el);

      setTimeout(()=>{ if(el.isConnected) el.remove(); }, 2300);
      const kids=[...birdDeck.children];
      if(kids.length>5) kids.slice(5).forEach(k=>k.remove());
    }

    birdStart.addEventListener('click', ()=>{
      if(bRun) return;
      bRun=true;
      birdMsg.className="result"; birdMsg.classList.remove('show');
      bTimer=setInterval(spawnCard, 850);
      spawnCard();
    });

    birdReset.addEventListener('click', ()=>{
      if(bTimer) clearInterval(bTimer);
      bTimer=null;
      bRun=false;
      bOk=0; bBad=0;
      updateBird();
      birdDeck.innerHTML="";
      birdMsg.className="result"; birdMsg.classList.remove('show');
    });

    updateBird();

    // =========================
    // Juego 2: Sopa de letras
    // =========================
    const wsGrid=document.getElementById('wsGrid');
    const wsWords=document.getElementById('wsWords');
    const wsMsg=document.getElementById('wsMsg');
    const wsNew=document.getElementById('wsNew');
    const wsReset=document.getElementById('wsReset');

    const WORDSET = ["QUETZAL","PAVODECACHO","BOSQUE","CUENCA","AVES","RUMCLA","TUL","LAGO","SEMI LLAS".replace(" ",""),"NUBOSO"];

    const N=10;
    const dirs = [
      [1,0],[-1,0],[0,1],[0,-1],[1,1],[-1,-1],[1,-1],[-1,1]
    ];

    let grid=[], found=new Set();
    let sel=[], isDown=false;

    function randInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }

    function emptyGrid(){
      grid = Array.from({length:N}, ()=>Array.from({length:N}, ()=>""));
    }

    function canPlace(word, r, c, dr, dc){
      for(let i=0;i<word.length;i++){
        const rr=r+dr*i, cc=c+dc*i;
        if(rr<0||rr>=N||cc<0||cc>=N) return false;
        const ch=grid[rr][cc];
        if(ch!=="" && ch!==word[i]) return false;
      }
      return true;
    }

    function place(word){
      for(let t=0;t<120;t++){
        const [dr,dc]=dirs[randInt(0,dirs.length-1)];
        const r=randInt(0,N-1), c=randInt(0,N-1);
        if(!canPlace(word,r,c,dr,dc)) continue;
        for(let i=0;i<word.length;i++){
          grid[r+dr*i][c+dc*i]=word[i];
        }
        return true;
      }
      return false;
    }

    function fill(){
      const letters="ABCDEFGHIJKLMNÑOPQRSTUVWXYZ".replace("Ñ","N");
      for(let r=0;r<N;r++){
        for(let c=0;c<N;c++){
          if(grid[r][c]==="") grid[r][c]=letters[randInt(0,letters.length-1)];
        }
      }
    }

    function renderWS(){
      wsGrid.innerHTML="";
      for(let r=0;r<N;r++){
        for(let c=0;c<N;c++){
          const d=document.createElement('div');
          d.className="cell";
          d.textContent=grid[r][c];
          d.dataset.r=r; d.dataset.c=c;
          wsGrid.appendChild(d);
        }
      }

      wsWords.innerHTML="";
      WORDSET.forEach(w=>{
        const tag=document.createElement('span');
        tag.className="wordTag" + (found.has(w) ? " done" : "");
        tag.textContent=w;
        wsWords.appendChild(tag);
      });

      wsMsg.className="result"; wsMsg.classList.remove('show');
    }

    function buildBoard(){
      found=new Set();
      emptyGrid();
      WORDSET.forEach(w=>place(w));
      fill();
      renderWS();
    }

    function clearSel(){
      sel.forEach(el=>el.classList.remove('sel'));
      sel=[];
    }

    function wordFromSel(){
      return sel.map(el=>el.textContent).join("");
    }

    function checkSel(){
      const w=wordFromSel();
      const rw=w.split("").reverse().join("");
      if(WORDSET.includes(w) && !found.has(w)){
        found.add(w);
        sel.forEach(el=>{ el.classList.remove('sel'); el.classList.add('hit'); });
        clearSel();
        renderWS();
        if(found.size===WORDSET.length){
          wsMsg.classList.add('show');
          wsMsg.className="result ok show";
          wsMsg.innerHTML="<strong>¡Completado!</strong> Encontraste todas las palabras.";
        }
        return;
      }
      if(WORDSET.includes(rw) && !found.has(rw)){
        found.add(rw);
        sel.forEach(el=>{ el.classList.remove('sel'); el.classList.add('hit'); });
        clearSel();
        renderWS();
        if(found.size===WORDSET.length){
          wsMsg.classList.add('show');
          wsMsg.className="result ok show";
          wsMsg.innerHTML="<strong>¡Completado!</strong> Encontraste todas las palabras.";
        }
        return;
      }
      // no match
      clearSel();
    }

    function cellAt(r,c){
      return [...wsGrid.children].find(el=>Number(el.dataset.r)===r && Number(el.dataset.c)===c);
    }

    function onDown(e){
      isDown=true;
      clearSel();
      const el=e.target.closest('.cell');
      if(!el) return;
      el.classList.add('sel');
      sel=[el];
      e.preventDefault();
    }

    function onMove(e){
      if(!isDown) return;
      const el=(e.touches && e.touches[0])
        ? document.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY)
        : e.target;
      const cell=el && el.closest ? el.closest('.cell') : null;
      if(!cell) return;
      if(sel.includes(cell) || cell.classList.contains('hit')) return;
      cell.classList.add('sel');
      sel.push(cell);
      e.preventDefault();
    }

    function onUp(e){
      if(!isDown) return;
      isDown=false;
      if(sel.length>=3) checkSel();
      else clearSel();
      e.preventDefault();
    }

    wsGrid.addEventListener('mousedown', onDown);
    wsGrid.addEventListener('mousemove', onMove);
    window.addEventListener('mouseup', onUp);

    wsGrid.addEventListener('touchstart', onDown, {passive:false});
    wsGrid.addEventListener('touchmove', onMove, {passive:false});
    wsGrid.addEventListener('touchend', onUp, {passive:false});

    wsNew.addEventListener('click', buildBoard);
    wsReset.addEventListener('click', ()=>{
      found=new Set();
      renderWS();
    });

    buildBoard();

  </script>
</body>
</html>
