<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>2.4 Deforestación: causas, consecuencias y soluciones · EPC AALA</title>
  <meta name="description" content="Deforestación: causas, consecuencias y soluciones. Mapa mental + juego de clasificación + mini reto de acciones." />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/markmap-autoloader@0.16.1"></script>

  <style>
    :root{
      --ink:#0b1020; --muted:rgba(11,16,32,.72);
      --glass:rgba(255,255,255,.66); --stroke:rgba(11,16,32,.10);
      --shadow:0 18px 45px rgba(11,16,32,.16); --shadow-soft:0 10px 24px rgba(11,16,32,.12);
      --radius:24px;
      --good: rgba(34,197,94,.14); --bad: rgba(225,29,72,.12);
      --warn: rgba(245,158,11,.14); --info: rgba(45,160,220,.14);
    }
    *{box-sizing:border-box}
    body{
      margin:0; color:var(--ink);
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:
        radial-gradient(1100px 760px at 12% 12%, rgba(185, 235, 255, .92), transparent 58%),
        radial-gradient(980px 760px at 84% 18%, rgba(160, 210, 255, .90), transparent 62%),
        radial-gradient(1200px 920px at 48% 96%, rgba(210, 245, 255, .88), transparent 58%),
        linear-gradient(135deg, #ecf9ff 0%, #e7f6ff 45%, #effbff 100%);
      min-height:100vh;
    }
    .wrap{max-width:1200px;margin:0 auto;padding:26px 18px 64px;}
    header{
      border:1px solid var(--stroke); background:var(--glass); border-radius:var(--radius);
      box-shadow:var(--shadow-soft); backdrop-filter: blur(12px);
      padding:18px; display:flex; justify-content:space-between; align-items:flex-start; gap:12px; flex-wrap:wrap;
    }
    .title{margin:0;font-family:Outfit,Inter,system-ui;font-weight:800;font-size:clamp(22px,2.7vw,34px);line-height:1.12;}
    .subtitle{margin:8px 0 0;color:var(--muted);font-size:14px;line-height:1.55;max-width:95ch;}
    .nav{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;
      padding:10px 12px;border-radius:14px;border:1px solid rgba(11,16,32,.12);
      background:rgba(255,255,255,.62);color:rgba(11,16,32,.92);
      font-weight:800;text-decoration:none;font-size:13px;cursor:pointer;user-select:none;white-space:nowrap;
      transition:transform .08s ease, background .12s ease, border-color .12s ease;
    }
    .btn:hover{background:rgba(255,255,255,.80);border-color:rgba(11,16,32,.18)}
    .btn.primary{
      background:linear-gradient(135deg, rgba(185,235,255,.92), rgba(160,210,255,.90), rgba(210,245,255,.90));
    }
    main{margin-top:14px;display:grid;gap:14px}
    .card{
      border:1px solid var(--stroke); background:var(--glass); border-radius:var(--radius);
      box-shadow:var(--shadow); backdrop-filter: blur(12px); padding:16px;
    }
    .card h2{margin:0;font-family:Outfit,Inter,system-ui;font-weight:800;font-size:16px}
    .muted{color:var(--muted)}
    .two{display:grid;grid-template-columns:1.1fr .9fr;gap:12px;align-items:start}
    @media (max-width:900px){.two{grid-template-columns:1fr}}
    .box{
      border-radius:18px;border:1px solid rgba(11,16,32,.10);
      background:rgba(255,255,255,.58);padding:12px;box-shadow:var(--shadow-soft);
    }
    .box p{margin:0 0 10px;line-height:1.65;color:rgba(11,16,32,.84)}
    .box ul{margin:8px 0 0 18px;padding:0;line-height:1.65;color:rgba(11,16,32,.82)}
    .pillGrid{margin-top:10px;display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
    @media(max-width:980px){.pillGrid{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:560px){.pillGrid{grid-template-columns:1fr}}
    .pill{
      border-radius:18px;border:1px solid rgba(11,16,32,.10);
      background:rgba(255,255,255,.58);padding:12px;box-shadow:0 10px 22px rgba(11,16,32,.08);
    }
    .pill .t{font-weight:900;margin:0 0 6px}
    .pill .s{margin:0;color:rgba(11,16,32,.74);font-size:13px;line-height:1.5}

    .mapTop{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;margin-bottom:10px}
    .mapStage{border:1px solid rgba(11,16,32,.10);background:rgba(255,255,255,.58);border-radius:18px;padding:10px;box-shadow:var(--shadow-soft);overflow:hidden}
    svg#mindmap{width:100%;height:520px;display:block;border-radius:14px;background:
      radial-gradient(700px 380px at 20% 0%, rgba(45,160,220,.10), transparent 55%),
      radial-gradient(700px 380px at 80% 10%, rgba(34,197,94,.10), transparent 55%);
    }
    .fallback{display:none;margin-top:10px;padding:10px 12px;border-radius:14px;border:1px dashed rgba(11,16,32,.18);background:rgba(255,255,255,.55);color:rgba(11,16,32,.72)}
    .fallback.show{display:block}

    .gameGrid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;align-items:start}
    @media (max-width:980px){.gameGrid{grid-template-columns:1fr}}
    .panel{
      border-radius:18px;border:1px solid rgba(11,16,32,.10);
      background:rgba(255,255,255,.58);padding:12px;box-shadow:var(--shadow-soft);
    }
    .panel h3{margin:0 0 6px;font-size:14px;font-family:Outfit,Inter,system-ui}
    .panel p{margin:0 0 10px;color:rgba(11,16,32,.72);font-size:13px;line-height:1.55}

    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{
      border:1px solid rgba(11,16,32,.12); background:rgba(255,255,255,.72);
      border-radius:999px; padding:8px 10px; font-size:12px; font-weight:800;
      cursor:grab; user-select:none; box-shadow:0 10px 22px rgba(11,16,32,.06);
    }
    .chip:active{cursor:grabbing}
    .bin{
      border:1px dashed rgba(11,16,32,.22); background:rgba(255,255,255,.55);
      border-radius:16px; padding:10px; min-height:160px;
    }
    .binHead{display:flex;justify-content:space-between;gap:10px;margin-bottom:8px}
    .binTitle{font-weight:900;font-size:13px}
    .binHint{font-size:12px;color:rgba(11,16,32,.62)}

    .result{
      margin-top:10px;border-radius:14px;border:1px solid rgba(11,16,32,.12);
      padding:10px 12px;background:rgba(255,255,255,.62);display:none;
      color:rgba(11,16,32,.82);font-size:13px;line-height:1.55
    }
    .result.good{background:var(--good)} .result.warn{background:var(--warn)}
    .result.bad{background:var(--bad)} .result.info{background:var(--info)}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}

    .miniQ{display:grid;gap:10px;margin-top:12px}
    .qRow{border:1px solid rgba(11,16,32,.10);background:rgba(255,255,255,.58);border-radius:18px;padding:12px;box-shadow:var(--shadow-soft)}
    .qRow .q{font-weight:900;margin:0 0 8px}
    .optRow{display:flex;gap:10px;flex-wrap:wrap}
    footer{text-align:center;color:rgba(11,16,32,.62);font-size:12px;margin-top:4px}
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div>
        <h1 class="title">2.4 Deforestación: causas, consecuencias y soluciones</h1>
        <p class="subtitle">
          La deforestación ocurre cuando se <strong>elimina la cobertura del bosque</strong> y el ecosistema pierde su capacidad
          de proteger el suelo, retener el agua y mantener biodiversidad. Aquí aprenderás causas típicas, efectos y soluciones reales.
        </p>
      </div>
      <div class="nav">
        <a class="btn" href="index.html">Inicio</a>
        <a class="btn" href="2-3.html">Anterior (2.3)</a>
        <a class="btn primary" href="2-5.html">Siguiente (2.5)</a>
      </div>
    </header>

    <main>
      <section class="card">
        <h2>Explicación (más clara)</h2>
        <div class="two" style="margin-top:10px;">
          <div class="box">
            <p>
              Un bosque no solo son árboles: incluye suelo vivo, plantas pequeñas, animales, hongos y agua circulando.
              Cuando se corta el bosque sin cuidado, el sistema se rompe:
              <strong>se calienta el suelo</strong>, baja la humedad y el terreno se vuelve más frágil.
            </p>
            <p><strong>¿Por qué es grave en la cuenca?</strong></p>
            <ul>
              <li>La lluvia arrastra tierra suelta → más sedimentos a ríos y al lago.</li>
              <li>Menos infiltración → nacimientos más débiles en verano.</li>
              <li>Más riesgo de derrumbes en laderas.</li>
            </ul>
          </div>
          <div class="box">
            <p><strong>Causas frecuentes</strong> (ejemplos que sí pasan en comunidades):</p>
            <ul>
              <li>Ampliar terrenos para siembra sin barreras y sin reforestar.</li>
              <li>Extraer leña sin plan (cortar más de lo que se recupera).</li>
              <li>Incendios en época seca (quemas mal controladas).</li>
              <li>Construir caminos sin manejo de agua (cunetas, drenajes).</li>
            </ul>
            <p class="muted" style="margin:10px 0 0;font-size:13px;">
              En muchos casos no es “una sola causa”, sino varias sumadas.
            </p>
          </div>
        </div>

        <div class="pillGrid">
          <div class="pill"><p class="t">Suelo</p><p class="s">Sin raíces, la lluvia se lleva la capa fértil (erosión).</p></div>
          <div class="pill"><p class="t">Agua</p><p class="s">Menos infiltración; ríos crecen rápido en invierno y bajan en verano.</p></div>
          <div class="pill"><p class="t">Clima</p><p class="s">Menos sombra y evaporación → más calor y menos humedad.</p></div>
          <div class="pill"><p class="t">Vida</p><p class="s">Animales y plantas pierden refugio y alimento.</p></div>
        </div>
      </section>

      <section class="card">
        <div class="mapTop">
          <div>
            <h2 style="margin:0;">Mapa mental</h2>
            <p class="muted" style="margin:4px 0 0;font-size:13px;">Causas · Consecuencias · Soluciones</p>
          </div>
          <div class="nav">
            <button class="btn" type="button" id="fit">Ajustar</button>
            <button class="btn" type="button" id="toggle">Expandir/Contraer</button>
            <button class="btn" type="button" id="resetMap">Reiniciar</button>
          </div>
        </div>
        <div class="mapStage">
          <svg id="mindmap" class="markmap"></svg>
          <div class="fallback" id="fallback">No se pudo cargar el mapa. Recarga la página.</div>
        </div>
      </section>

      <section class="card">
        <h2>Juego 1: clasifica (Causa / Consecuencia / Solución)</h2>
        <p class="muted" style="margin:8px 0 0;font-size:13px;">
          Arrastra o toca una tarjeta y luego toca el grupo (en celular). Completa todo y presiona “Evaluar”.
        </p>

        <div class="gameGrid" style="margin-top:12px;">
          <div class="panel">
            <h3>Tarjetas</h3>
            <p>Colócalas donde correspondan.</p>
            <div class="chips" id="chips"></div>
            <div class="actions">
              <button class="btn" type="button" id="mix">Mezclar</button>
              <button class="btn" type="button" id="clear">Limpiar</button>
            </div>
            <div class="result info" id="note"></div>
          </div>

          <div class="panel">
            <div class="bin" id="binCausa">
              <div class="binHead"><div class="binTitle">Causas</div><div class="binHint">¿Qué provoca la pérdida?</div></div>
            </div>
            <div class="result" id="r1"></div>
          </div>

          <div class="panel">
            <div class="bin" id="binCons">
              <div class="binHead"><div class="binTitle">Consecuencias</div><div class="binHint">¿Qué pasa después?</div></div>
            </div>
            <div style="height:10px;"></div>
            <div class="bin" id="binAcc">
              <div class="binHead"><div class="binTitle">Soluciones</div><div class="binHint">¿Qué ayuda a prevenir/reducir?</div></div>
            </div>

            <div class="actions">
              <button class="btn primary" type="button" id="check">Evaluar</button>
              <button class="btn" type="button" id="restart">Reiniciar</button>
            </div>
            <div class="result" id="final"></div>
          </div>
        </div>

        <div class="miniQ">
          <div class="qRow">
            <p class="q">Mini reto: ¿Qué harías primero en tu comunidad?</p>
            <div class="optRow">
              <button class="btn" type="button" data-pick="A">A) Organizar jornada de reforestación sin plan</button>
              <button class="btn" type="button" data-pick="B">B) Hacer diagnóstico: zonas críticas, acuerdos y metas</button>
              <button class="btn" type="button" data-pick="C">C) Ignorar el problema</button>
            </div>
            <div class="result" id="miniRes"></div>
          </div>
        </div>
      </section>

      <footer>EPC AALA</footer>
    </main>
  </div>

  <script>
    // ===== MAPA (Markmap) =====
    const md = `
# 2.4 Deforestación
## ¿Qué es?
- Pérdida de cobertura de bosque
- Se rompe el equilibrio del ecosistema
## Causas
- Tala ilegal o sin manejo
- Incendios (quemas mal controladas)
- Expansión agrícola/ganadera
- Construcción sin planificación (caminos, viviendas)
## Consecuencias
- Erosión y pérdida de suelo fértil
- Más sedimentos en ríos y lago
- Menos infiltración y nacimientos débiles
- Pérdida de hábitat y biodiversidad
- Mayor temperatura local / menos humedad
## Soluciones
- Manejo forestal responsable
- Reforestación con especies nativas
- Prevención de incendios (vigilancia, rondas, acuerdos)
- Protección de zonas de recarga hídrica
- Educación ambiental y acuerdos comunitarios
`.trim();

    let mm=null, expanded=true;
    function renderMap(){
      const fb=document.getElementById('fallback');
      try{
        if(!window.markmap?.Transformer || !window.markmap?.Markmap) return false;
        const {Transformer,Markmap}=window.markmap;
        const t=new Transformer();
        const {root}=t.transform(md);
        const svg=document.getElementById('mindmap');
        while(svg.firstChild) svg.removeChild(svg.firstChild);
        mm=Markmap.create(svg,{autoFit:true,duration:240},root);
        fb.classList.remove('show');
        return true;
      }catch(e){
        fb.classList.add('show');
        return true;
      }
    }
    let tries=0; const it=setInterval(()=>{tries++; const ok=renderMap(); if(ok||tries>12) clearInterval(it);},300);
    document.getElementById('fit').onclick=()=>mm&&mm.fit();
    document.getElementById('toggle').onclick=()=>{ if(!mm) return; expanded?mm.foldAll():mm.unfoldAll(); expanded=!expanded; };
    document.getElementById('resetMap').onclick=()=>{mm=null; expanded=true; renderMap();};

    // ===== JUEGO (drag + tap) =====
    const DATA=[
      {id:'t1',bin:'causa', t:'Quemas en época seca sin control'},
      {id:'t2',bin:'causa', t:'Tala ilegal / sin manejo'},
      {id:'t3',bin:'causa', t:'Expandir siembra en laderas sin barreras'},
      {id:'t4',bin:'cons',  t:'Erosión: se pierde la capa fértil'},
      {id:'t5',bin:'cons',  t:'Más sedimentos a ríos y al lago'},
      {id:'t6',bin:'cons',  t:'Menos agua constante en nacimientos'},
      {id:'t7',bin:'acc',   t:'Reforestación con especies nativas'},
      {id:'t8',bin:'acc',   t:'Manejo forestal responsable (cortar y reponer)'},
      {id:'t9',bin:'acc',   t:'Protección de zonas de recarga hídrica'},
      {id:'t10',bin:'acc',  t:'Prevención de incendios (rondas y acuerdos)'},
    ];
    const chips=document.getElementById('chips');
    const bins={
      causa:document.getElementById('binCausa'),
      cons:document.getElementById('binCons'),
      acc:document.getElementById('binAcc')
    };
    const note=document.getElementById('note');
    const final=document.getElementById('final');
    let selected=null;

    function shuffle(a){
      a=a.slice();
      for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]];}
      return a;
    }
    function clearSel(){
      selected=null;
      [...document.querySelectorAll('.chip')].forEach(x=>x.style.outline='none');
    }
    function makeChip(it){
      const d=document.createElement('div');
      d.className='chip'; d.draggable=true;
      d.id='chip_'+it.id; d.dataset.bin=it.bin; d.textContent=it.t;

      d.addEventListener('dragstart',e=>{e.dataTransfer.setData('text/plain',it.id); clearSel();});
      d.addEventListener('click',()=>{
        const was=(selected===it.id);
        clearSel();
        if(!was){
          selected=it.id;
          d.style.outline='2px solid rgba(45,160,220,.40)';
          note.style.display='block';
          note.className='result info';
          note.textContent='Tarjeta seleccionada. Toca un grupo para colocarla.';
        }else{
          note.style.display='none';
        }
      });
      return d;
    }
    function setup(){
      chips.innerHTML='';
      Object.values(bins).forEach(b=>[...b.querySelectorAll('.chip')].forEach(x=>x.remove()));
      clearSel(); note.style.display='none'; final.style.display='none';
      shuffle(DATA).forEach(it=>chips.appendChild(makeChip(it)));
    }
    function place(id, key){
      const el=document.getElementById('chip_'+id);
      if(!el) return;
      bins[key].appendChild(el);
      note.style.display='none';
      clearSel();
    }
    Object.entries(bins).forEach(([key,bin])=>{
      bin.addEventListener('dragover',e=>e.preventDefault());
      bin.addEventListener('drop',e=>{e.preventDefault(); place(e.dataTransfer.getData('text/plain'), key);});
      bin.addEventListener('click',()=>{ if(selected) place(selected, key); });
    });

    document.getElementById('mix').onclick=setup;
    document.getElementById('restart').onclick=setup;
    document.getElementById('clear').onclick=()=>{
      Object.values(bins).forEach(b=>[...b.querySelectorAll('.chip')].forEach(x=>chips.appendChild(x)));
      final.style.display='none'; note.style.display='none'; clearSel();
    };

    document.getElementById('check').onclick=()=>{
      const placed = Object.values(bins).reduce((n,b)=> n + b.querySelectorAll('.chip').length, 0);
      if(placed < DATA.length){
        final.className='result warn'; final.style.display='block';
        final.textContent='Aún faltan tarjetas por colocar. Completa los 3 grupos y vuelve a evaluar.';
        return;
      }
      let ok=0;
      Object.entries(bins).forEach(([key,b])=>{
        [...b.querySelectorAll('.chip')].forEach(ch=>{ if(ch.dataset.bin===key) ok++; });
      });
      const score=Math.round((ok/DATA.length)*100);
      final.className='result ' + (score>=80?'good':score>=50?'warn':'bad');
      final.style.display='block';
      final.textContent=`Resultado: ${ok}/${DATA.length} correctas (${score}%).`;
    };

    // mini reto
    const miniRes=document.getElementById('miniRes');
    document.querySelectorAll('[data-pick]').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const p=btn.getAttribute('data-pick');
        miniRes.style.display='block';
        if(p==='B'){
          miniRes.className='result good';
          miniRes.textContent='✅ Correcto. Primero se diagnostica y se organizan acuerdos/metas para que las acciones funcionen y duren.';
        }else if(p==='A'){
          miniRes.className='result warn';
          miniRes.textContent='⚠️ Puede ayudar, pero si no hay plan (zona, especie, cuidado, riego, protección) muchas plantas se pierden.';
        }else{
          miniRes.className='result bad';
          miniRes.textContent='❌ Ignorar el problema hace que aumenten erosión, incendios y pérdida de agua con el tiempo.';
        }
      });
    });

    setup();
  </script>
</body>
</html>
